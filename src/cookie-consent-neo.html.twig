{% extends '@nucleus/partials/particle.html.twig' %}

{% block stylesheets %}
    {% if particle.enabled %}
        {{ parent() }}
        <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/{{particle.ccversion}}/cookieconsent.min.css" />
    {% endif %}
{% endblock %}

{% block javascript_footer %}
    {% if particle.enabled %}
        {{ parent() }}
        
        
        {% set bannerMsg = particle.message|default('This website uses cookies to ensure you get the best experience on our website.') %}
        {% set bannerStatic = false %}
        
        {% if particle.compliance != 'info' and particle.compliance is not empty %}
            {% set compType = particle.compliance %}
        {% else %}
            {% set compType = '' %}
        {% endif %}
        
        {% if particle.position == 'bottom' %}
            {% set bannerPos = '' %}
        {% elseif particle.position == 'top' %}
            {% set bannerPos = 'top' %}
        {% elseif particle.position == 'float_bl' %}
            {% set bannerPos = 'bottom-left' %}
        {% elseif particle.position == 'float_br' %}
            {% set bannerPos = 'bottom-right' %}
        {% elseif particle.position == 'float_tl' %}
            {% set bannerPos = 'top-left' %}
        {% elseif particle.position == 'float_tr' %}
            {% set bannerPos = 'top-right' %}
        {% else %}
            {% set bannerPos = '' %}
        {% endif %}
        
        {% if particle.position == 'top_p'%}
            {% set bannerStatic = true %}
        {% endif %}
            
        
        {% if particle.layout == 'block' or particle.layout == 'wire' %}
            {% set bannerLayout = '' %}
        {% elseif particle.layout == 'classic' %}
            {% set bannerLayout = 'classic' %}
        {% elseif particle.layout == 'edgeless' %}
            {% set bannerLayout = 'edgeless' %}
        {% elseif particle.layout == 'wire' %}
            {% set bannerLayout = '' %}
        {% endif %}
        
        {% set bannerPopText = '' %}
        {% set bannerBtnText = '' %}
        {% set bannerHLText = '' %}
        {% set bannerPopLink = '' %}
        {% set bannerHLBg = '' %}
        
        {% if not particle.enablecpalette %}
            
            {% if particle.palette == 'p1' %}
                {% set bannerPopBg = '#000' %}
                {% set bannerBtnBg = '#f1d600' %}
            {% elseif particle.palette == 'p2' %}
                {% set bannerPopBg = '#eaf7f7' %}
                {% set bannerPopText = '#5c7291' %}
                {% set bannerBtnBg = '#56cbdb' %}
                {% set bannerBtnText = '#ffffff' %}
            {% elseif particle.palette == 'p3' %}
                {% set bannerPopBg = '#252e39' %}
                {% set bannerBtnBg = '#14a7d0' %}
            {% elseif particle.palette == 'p4' %}
                {% set bannerPopBg = '#000' %}
                {% set bannerPopText = '#0f0' %}
                {% set bannerBtnBg = '#0f0' %}
            {% elseif particle.palette == 'p5' %}
                {% set bannerPopBg = '#3937a3' %}
                {% set bannerBtnBg = '#e62576' %}
            {% elseif particle.palette == 'p6' %}
                {% set bannerPopBg = '#64386b' %}
                {% set bannerPopText = '#ffcdfd' %}
                {% set bannerBtnBg = '#f8a8ff' %}
                {% set bannerBtnText = '#3f0045' %}
            {% elseif particle.palette == 'p7' %}
                {% set bannerPopBg = '#237afc' %}
                {% set bannerBtnBg = '#fff' %}
                {% set bannerBtnText = '#237afc' %}
            {% elseif particle.palette == 'p8' %}
                {% set bannerPopBg = '#aa0000' %}
                {% set bannerPopText = '#ffdddd' %}
                {% set bannerBtnBg = '#ff0000' %}
            {% elseif particle.palette == 'p9' %}
                {% set bannerPopBg = '#383b75' %}
                {% set bannerBtnBg = '#f1d600' %}
            {% elseif particle.palette == 'p10' %}
                {% set bannerPopBg = '#1d8a8a' %}
                {% set bannerBtnBg = '#62ffaa' %}
            {% elseif particle.palette == 'p11' %}
                {% set bannerPopBg = '#edeff5' %}
                {% set bannerPopText = '#838391' %}
                {% set bannerBtnBg = '#4b81e8' %}
            {% elseif particle.palette == 'p12' %}
                {% set bannerPopBg = '#343c66' %}
                {% set bannerPopText = '#cfcfe8' %}
                {% set bannerBtnBg = '#f71559' %}
            {% elseif particle.palette == 'p13' %}
                {% set bannerPopBg = '#216942' %}
                {% set bannerPopText = '#b2d192' %}
                {% set bannerBtnBg = '#afed71' %}
            {% elseif particle.palette == 'p14' %}
                {% set bannerPopBg = '#3c404d' %}
                {% set bannerPopText = '#d6d6d6' %}
                {% set bannerBtnBg = '#8bed4f' %}
            {% elseif particle.palette == 'p15' %}
                {% set bannerPopBg = '#eb6c44' %}
                {% set bannerPopText = '#ffffff' %}
                {% set bannerBtnBg = '#f5d948' %}
            {% elseif particle.palette == 'p16' %}
                {% set bannerPopBg = '#efefef' %}
                {% set bannerPopText = '#404040' %}
                {% set bannerBtnBg = '#8ec760' %}
                {% set bannerBtnText = '#ffffff' %}
            {% else %}
                {% set bannerPopBg = '#000' %}
                {% set bannerBtnBg = '#f1d600' %}
            {% endif %}
            
        {% else %}
            
            {% if particle.popupbg is not empty %}
                {% set bannerPopBg = particle.popupbg %}
            {% else %}
                {% set bannerPopBg = '#000' %}
            {% endif %}
                 
            {% if particle.buttonbg is not empty %}
                {% set bannerBtnBg = particle.buttonbg %}
            {% else %}
                {% set bannerBtnBg = '#f1d600' %}    
            {% endif %}
            
            {% if particle.popuptext is not empty %}
                {% set bannerPopText = particle.popuptext %}
            {% endif %}
                
            {% if particle.buttontext is not empty %}
                {% set bannerBtnText = particle.buttontext %}
            {% endif %}
            
            {% if particle.popuplink is not empty %}
                {% set bannerPopLink = particle.popuplink %}
            {% endif %}
            
        {% endif %}
            
        {% set linkText = particle.lmtext|default('Read more') %}
        {% set linkTarget = particle.lmtarget|default('_blank') %}
        {% set linkHref = particle.lmlink|default('https://cookiesandyou.com') %}
        {% set dismissText = particle.dmtext|default('Got it!') %}
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/{{particle.ccversion}}/cookieconsent.min.js"></script>
        <script>
            window.addEventListener("load", function(){
                window.cookieconsent.initialise({
                    palette: {
                        popup: {
                            background: "{{bannerPopBg|e('js')}}",
                            {% if bannerPopText is not empty %}
                                text: "{{bannerPopText|e('js')}}"
                            {% endif %}
                            {% if bannerPopLink is not empty %}
                                link: "{{bannerPopLink|e('js')}}"
                            {% endif %}
                        },
                        button: {
                            {% if particle.layout == 'wire' %}
                                background: "transparent",
                                text: "{{bannerBtnBg|e('js')}}",
                                border: "{{bannerBtnBg|e('js')}}",
                            {% else %}
                                background: "{{bannerBtnBg|e('js')}}",
                                {% if bannerPopText is not empty %}
                                    text: "{{bannerBtnText|e('js')}}"
                                {% endif %}
                            {% endif %}
                        }
                    },
            
                    {% if not particle.lmenable %}
                        showLink: false,
                    {% endif %}
                    
                    {% if bannerPos is not empty %}
                        position: "{{bannerPos|e('js')}}",
                    {% endif %}
                    
                    {% if bannerLayout is not empty %}
                        theme: "{{bannerLayout|e('js')}}",
                    {% endif %}
                    
                    {% if bannerStatic == true %}
                        static: true,
                    {% endif %}
                    
                    content: {
                        message: "{{bannerMsg|e('js')}}",
                        link: "{{linkText|e('js')}}",
                        dismiss: "{{dismissText|e('js')}}",
                        
                        {% if particle.lmenable %}
                            href: "{{linkHref|raw}}" 
                        {% endif %}
                    },
                    
                    {% if compType is not empty %}
                        type: "{{compType}}",
                    {% endif %}
                        
                    {% set msgLink = '<span id="cookieconsent:desc" class="cc-message">' %}
                    {% set msgLink = msgLink ~ '{{message}}' %}
                    {% if particle.lmenable %}
                        {% set msgLink = msgLink ~ ' <a aria-label="learn more about cookies" tabindex="0" class="cc-link" href="' %}
                        {% set msgLink = msgLink ~ linkHref|raw %}
                        {% set msgLink = msgLink ~ '" target="' ~ linkTarget ~ '">{{link}}</a>' %}
                    {% endif %}   
                    {% set msgLink = msgLink ~ '</span>' %}
                    elements: {
                        messagelink: "{{msgLink|e('js')}}"
                    }
                        
                })});
        </script>
    {% endif %}
{% endblock %}